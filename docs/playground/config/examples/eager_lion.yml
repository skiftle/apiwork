title: Representations
description: Generate a complete contract from representation definitions
order: 1

sections:
  - title: API Definition
    files:
      - config/apis/eager_lion.rb
  - title: Models
    files:
      - app/models/eager_lion/invoice.rb
      - app/models/eager_lion/customer.rb
      - app/models/eager_lion/line.rb
  - title: Representations
    files:
      - app/representations/eager_lion/invoice_representation.rb
      - app/representations/eager_lion/customer_representation.rb
      - app/representations/eager_lion/line_representation.rb
  - title: Contracts
    files:
      - app/contracts/eager_lion/invoice_contract.rb
  - title: Controllers
    files:
      - app/controllers/eager_lion/invoices_controller.rb

scenarios:
  - title: List all invoices
    description: Returns invoices with customer data
    order: 1
    method: GET
    path: /eager_lion/invoices
    setup:
      - create: customer
        fields:
          name: Acme Corp
      - create: invoice
        fields:
          number: INV-001
          status: sent
          customer_id: :customer_id
      - create: invoice
        fields:
          number: INV-002
          status: draft
          customer_id: :customer_id

  - title: Get invoice details
    description: Fetch invoice with associations
    order: 2
    method: GET
    path: /eager_lion/invoices/:id
    setup:
      - create: customer
        fields:
          name: Acme Corp
      - create: invoice
        fields:
          number: INV-001
          status: sent
          customer_id: :customer_id

  - title: Create a new invoice
    description: Create invoice linked to customer
    order: 3
    method: POST
    path: /eager_lion/invoices
    setup:
      - create: customer
        fields:
          name: Acme Corp
    body:
      invoice:
        number: INV-001
        status: sent
        customerId: :customer_id
        issuedOn: "2024-01-15"
        notes: First invoice

  - title: Update an invoice
    description: Modify invoice status and notes
    order: 4
    method: PATCH
    path: /eager_lion/invoices/:id
    setup:
      - create: customer
        fields:
          name: Acme Corp
      - create: invoice
        fields:
          number: INV-001
          status: draft
          customer_id: :customer_id
    body:
      invoice:
        status: sent
        notes: Updated notes

  - title: Delete an invoice
    description: Remove invoice from system
    order: 5
    method: DELETE
    path: /eager_lion/invoices/:id
    setup:
      - create: customer
        fields:
          name: Acme Corp
      - create: invoice
        fields:
          number: INV-001
          status: draft
          customer_id: :customer_id
