title: Filtering and Sorting
description: Complex queries with string patterns, numeric ranges, and logical operators
order: 3

sections:
  - title: API Definition
    files:
      - config/apis/bold_falcon.rb
  - title: Models
    files:
      - app/models/bold_falcon/article.rb
      - app/models/bold_falcon/category.rb
  - title: Representations
    files:
      - app/representations/bold_falcon/article_representation.rb
      - app/representations/bold_falcon/category_representation.rb
  - title: Contracts
    files:
      - app/contracts/bold_falcon/article_contract.rb
  - title: Controllers
    files:
      - app/controllers/bold_falcon/articles_controller.rb

scenarios:
  - title: Filter by status
    description: Filter articles where status equals published
    order: 1
    method: GET
    path: /bold_falcon/articles?filter[status][eq]=published
    setup:
      - create: article
        fields:
          title: Published Article
          status: published
      - create: article
        fields:
          title: Draft Article
          status: draft

  - title: Filter by title pattern
    description: Filter articles with title containing text
    order: 2
    method: GET
    path: /bold_falcon/articles?filter[title][contains]=Rails
    setup:
      - create: article
        fields:
          title: Getting Started with Rails
          status: published
      - create: article
        fields:
          title: Python Basics
          status: published

  - title: Sort by date
    description: Sort articles by published date descending
    order: 3
    method: GET
    path: /bold_falcon/articles?sort[published_on]=desc
    setup:
      - create: article
        fields:
          title: Old Article
          status: published
          published_on: "2024-01-01"
      - create: article
        fields:
          title: New Article
          status: published
          published_on: "2024-06-01"

  - title: Multiple sort fields
    description: Sort by status then date
    order: 4
    method: GET
    path: /bold_falcon/articles?sort[status]=asc&sort[published_on]=desc
    setup:
      - create: article
        fields:
          title: Draft 1
          status: draft
          published_on: "2024-01-01"
      - create: article
        fields:
          title: Published 1
          status: published
          published_on: "2024-02-01"
      - create: article
        fields:
          title: Draft 2
          status: draft
          published_on: "2024-03-01"

  - title: Filter by date range
    description: Articles published in date range
    order: 5
    method: GET
    path: /bold_falcon/articles?filter[published_on][gte]=2024-01-01&filter[published_on][lt]=2024-02-01
    setup:
      - create: article
        fields:
          title: January Article
          status: published
          published_on: "2024-01-15"
      - create: article
        fields:
          title: February Article
          status: published
          published_on: "2024-02-15"

  - title: Filter by view count
    description: Articles with more than 100 views
    order: 6
    method: GET
    path: /bold_falcon/articles?filter[view_count][gt]=100
    setup:
      - create: article
        fields:
          title: Popular Article
          status: published
          view_count: 500
      - create: article
        fields:
          title: New Article
          status: published
          view_count: 10

  - title: Combined filter and sort
    description: Filter by status and sort by views
    order: 7
    method: GET
    path: /bold_falcon/articles?filter[status][eq]=published&sort[view_count]=desc
    setup:
      - create: article
        fields:
          title: Popular Published
          status: published
          view_count: 1000
      - create: article
        fields:
          title: Draft Article
          status: draft
          view_count: 500
      - create: article
        fields:
          title: Less Popular Published
          status: published
          view_count: 100

  - title: Filter by category
    description: Filter through association
    order: 8
    method: GET
    path: /bold_falcon/articles?filter[category][name][eq]=Technology
    setup:
      - create: category
        fields:
          name: Technology
          slug: technology
      - create: article
        fields:
          title: Tech Article
          status: published
          category_id: :category_id
      - create: article
        fields:
          title: Uncategorized Article
          status: published
