title: API Documentation
description: Document APIs with descriptions, examples, formats, and deprecation notices at every level
order: 11

sections:
  - title: API Definition
    files:
      - config/apis/brave_eagle.rb
  - title: Models
    files:
      - app/models/brave_eagle/task.rb
      - app/models/brave_eagle/user.rb
      - app/models/brave_eagle/comment.rb
  - title: Representations
    files:
      - app/representations/brave_eagle/task_representation.rb
      - app/representations/brave_eagle/user_representation.rb
      - app/representations/brave_eagle/comment_representation.rb
  - title: Contracts
    files:
      - app/contracts/brave_eagle/task_contract.rb
  - title: Controllers
    files:
      - app/controllers/brave_eagle/tasks_controller.rb

scenarios:
  - title: List all tasks
    description: Returns tasks with documented attributes
    order: 1
    method: GET
    path: /brave_eagle/tasks
    setup:
      - create: user
        fields:
          name: Jane Doe
          email: jane@example.com
      - create: task
        fields:
          title: Write documentation
          description: Complete the API reference guide
          status: pending
          priority: high
          assignee_id: :user_id
      - create: task
        fields:
          title: Review pull request
          status: completed
          priority: medium

  - title: Get task details
    description: Single task with associations
    order: 2
    method: GET
    path: /brave_eagle/tasks/:id
    setup:
      - create: user
        fields:
          name: John Smith
          email: john@example.com
      - create: task
        fields:
          title: Implement login
          description: Add OAuth2 support
          status: in_progress
          priority: critical
          due_date: "2024-02-01"
          assignee_id: :user_id
      - create: comment
        fields:
          task_id: :task_id
          body: Started working on this
          author_name: John Smith
      - create: comment
        fields:
          task_id: :task_id
          body: Looking good so far
          author_name: Jane Doe

  - title: Create a task
    description: Create with documented fields
    order: 3
    method: POST
    path: /brave_eagle/tasks
    setup:
      - create: user
        fields:
          name: Alice Brown
          email: alice@example.com
    body:
      task:
        title: New feature implementation
        description: Implement the new dashboard widget
        status: pending
        priority: high
        due_date: "2024-02-01"
        assignee_id: :user_id

  - title: Archive a task (deprecated)
    description: Deprecated action example
    order: 4
    method: PATCH
    path: /brave_eagle/tasks/:id/archive
    setup:
      - create: task
        fields:
          title: Old task to archive
          status: completed
