---
:openapi: 3.1.0
:info:
  :title: "/happy_zebra API"
  :version: 1.0.0
:paths:
  users/:
    get:
      :operationId: usersIndex
      :tags:
      - Users
      :parameters:
      - :in: query
        :name: filter
        :required: false
        :schema:
          :oneOf:
          - :$ref: "#/components/schemas/userFilter"
          - :type: array
            :items:
              :$ref: "#/components/schemas/userFilter"
      - :in: query
        :name: include
        :required: false
        :schema:
          :$ref: "#/components/schemas/userInclude"
      - :in: query
        :name: page
        :required: false
        :schema:
          :$ref: "#/components/schemas/userPage"
      - :in: query
        :name: sort
        :required: false
        :schema:
          :oneOf:
          - :$ref: "#/components/schemas/userSort"
          - :type: array
            :items:
              :$ref: "#/components/schemas/userSort"
      :responses:
        :200:
          :description: Successful response
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  meta:
                    :type: object
                    :properties: {}
                  pagination:
                    :$ref: "#/components/schemas/pagePagination"
                  users:
                    :type: array
                    :items:
                      :$ref: "#/components/schemas/user"
    post:
      :operationId: usersCreate
      :tags:
      - Users
      :parameters:
      - :in: query
        :name: include
        :required: false
        :schema:
          :$ref: "#/components/schemas/userInclude"
      :requestBody:
        :required: true
        :content:
          :application/json:
            :schema:
              :type: object
              :properties:
                user:
                  :$ref: "#/components/schemas/userCreatePayload"
              :required:
              - user
      :responses:
        :200:
          :description: Successful response
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  meta:
                    :type: object
                    :properties: {}
                  user:
                    :$ref: "#/components/schemas/user"
                :required:
                - user
        :422:
          :description: Unprocessable Entity
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  issues:
                    :type: array
                    :items:
                      :$ref: "#/components/schemas/issue"
  users/:id:
    get:
      :operationId: usersShow
      :tags:
      - Users
      :parameters:
      - :in: query
        :name: include
        :required: false
        :schema:
          :$ref: "#/components/schemas/userInclude"
      :responses:
        :200:
          :description: Successful response
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  meta:
                    :type: object
                    :properties: {}
                  user:
                    :$ref: "#/components/schemas/user"
                :required:
                - user
    patch:
      :operationId: usersUpdate
      :tags:
      - Users
      :parameters:
      - :in: query
        :name: include
        :required: false
        :schema:
          :$ref: "#/components/schemas/userInclude"
      :requestBody:
        :required: true
        :content:
          :application/json:
            :schema:
              :type: object
              :properties:
                user:
                  :$ref: "#/components/schemas/userUpdatePayload"
      :responses:
        :200:
          :description: Successful response
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  meta:
                    :type: object
                    :properties: {}
                  user:
                    :$ref: "#/components/schemas/user"
        :422:
          :description: Unprocessable Entity
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  issues:
                    :type: array
                    :items:
                      :$ref: "#/components/schemas/issue"
    delete:
      :operationId: usersDestroy
      :tags:
      - Users
      :responses:
        :204:
          :description: No content
  posts/:
    get:
      :operationId: postsIndex
      :tags:
      - Posts
      :parameters:
      - :in: query
        :name: include
        :required: false
        :schema:
          :$ref: "#/components/schemas/postInclude"
      - :in: query
        :name: page
        :required: false
        :schema:
          :$ref: "#/components/schemas/postPage"
      :responses:
        :200:
          :description: Successful response
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  meta:
                    :type: object
                    :properties: {}
                  pagination:
                    :$ref: "#/components/schemas/pagePagination"
                  posts:
                    :type: array
                    :items:
                      :$ref: "#/components/schemas/post"
    post:
      :operationId: postsCreate
      :tags:
      - Posts
      :parameters:
      - :in: query
        :name: include
        :required: false
        :schema:
          :$ref: "#/components/schemas/postInclude"
      :requestBody:
        :required: true
        :content:
          :application/json:
            :schema:
              :type: object
              :properties:
                post:
                  :$ref: "#/components/schemas/postCreatePayload"
              :required:
              - post
      :responses:
        :200:
          :description: Successful response
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  meta:
                    :type: object
                    :properties: {}
                  post:
                    :$ref: "#/components/schemas/post"
                :required:
                - post
        :422:
          :description: Unprocessable Entity
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  issues:
                    :type: array
                    :items:
                      :$ref: "#/components/schemas/issue"
  posts/:id:
    get:
      :operationId: postsShow
      :tags:
      - Posts
      :parameters:
      - :in: query
        :name: include
        :required: false
        :schema:
          :$ref: "#/components/schemas/postInclude"
      :responses:
        :200:
          :description: Successful response
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  meta:
                    :type: object
                    :properties: {}
                  post:
                    :$ref: "#/components/schemas/post"
                :required:
                - post
    patch:
      :operationId: postsUpdate
      :tags:
      - Posts
      :parameters:
      - :in: query
        :name: include
        :required: false
        :schema:
          :$ref: "#/components/schemas/postInclude"
      :requestBody:
        :required: true
        :content:
          :application/json:
            :schema:
              :type: object
              :properties:
                post:
                  :$ref: "#/components/schemas/postUpdatePayload"
      :responses:
        :200:
          :description: Successful response
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  meta:
                    :type: object
                    :properties: {}
                  post:
                    :$ref: "#/components/schemas/post"
        :422:
          :description: Unprocessable Entity
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  issues:
                    :type: array
                    :items:
                      :$ref: "#/components/schemas/issue"
    delete:
      :operationId: postsDestroy
      :tags:
      - Posts
      :responses:
        :204:
          :description: No content
  comments/:
    get:
      :operationId: commentsIndex
      :tags:
      - Comments
      :parameters:
      - :in: query
        :name: include
        :required: false
        :schema:
          :$ref: "#/components/schemas/commentInclude"
      - :in: query
        :name: page
        :required: false
        :schema:
          :$ref: "#/components/schemas/commentPage"
      :responses:
        :200:
          :description: Successful response
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  comments:
                    :type: array
                    :items:
                      :$ref: "#/components/schemas/comment"
                  meta:
                    :type: object
                    :properties: {}
                  pagination:
                    :$ref: "#/components/schemas/pagePagination"
    post:
      :operationId: commentsCreate
      :tags:
      - Comments
      :requestBody:
        :required: true
        :content:
          :application/json:
            :schema:
              :type: object
              :properties:
                comment:
                  :$ref: "#/components/schemas/commentCreatePayload"
              :required:
              - comment
      :responses:
        :200:
          :description: Successful response
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  comment:
                    :$ref: "#/components/schemas/comment"
                  meta:
                    :type: object
                    :properties: {}
                :required:
                - comment
        :422:
          :description: Unprocessable Entity
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  issues:
                    :type: array
                    :items:
                      :$ref: "#/components/schemas/issue"
  comments/:id:
    get:
      :operationId: commentsShow
      :tags:
      - Comments
      :responses:
        :200:
          :description: Successful response
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  comment:
                    :$ref: "#/components/schemas/comment"
                  meta:
                    :type: object
                    :properties: {}
                :required:
                - comment
    patch:
      :operationId: commentsUpdate
      :tags:
      - Comments
      :requestBody:
        :required: true
        :content:
          :application/json:
            :schema:
              :type: object
              :properties:
                comment:
                  :$ref: "#/components/schemas/commentUpdatePayload"
      :responses:
        :200:
          :description: Successful response
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  comment:
                    :$ref: "#/components/schemas/comment"
                  meta:
                    :type: object
                    :properties: {}
        :422:
          :description: Unprocessable Entity
          :content:
            :application/json:
              :schema:
                :type: object
                :properties:
                  issues:
                    :type: array
                    :items:
                      :$ref: "#/components/schemas/issue"
    delete:
      :operationId: commentsDestroy
      :tags:
      - Comments
      :responses:
        :204:
          :description: No content
:components:
  :schemas:
    comment:
      :type: object
      :properties:
        author:
          :type: string
        body:
          :type: string
        id:
          :type: string
    commentCreatePayload:
      :type: object
      :properties:
        author:
          :type: string
        body:
          :type: string
      :required:
      - author
      - body
    commentInclude:
      :type: object
      :properties: {}
    commentNestedCreatePayload:
      :type: object
      :properties:
        _type:
          :type: string
          :const: create
        author:
          :type: string
        body:
          :type: string
      :required:
      - _type
      - author
      - body
    commentNestedPayload:
      :oneOf:
      - :$ref: "#/components/schemas/commentNestedCreatePayload"
      - :$ref: "#/components/schemas/commentNestedUpdatePayload"
      :discriminator:
        :propertyName: _type
        :mapping:
          create: "#/components/schemas/commentNestedCreatePayload"
          update: "#/components/schemas/commentNestedUpdatePayload"
    commentNestedUpdatePayload:
      :type: object
      :properties:
        _type:
          :type: string
          :const: update
        author:
          :type: string
        body:
          :type: string
      :required:
      - _type
      - author
      - body
    commentPage:
      :type: object
      :properties:
        number:
          :type: integer
          :minimum: 1
        size:
          :type: integer
          :minimum: 1
          :maximum: 100
    commentUpdatePayload:
      :type: object
      :properties:
        author:
          :type: string
        body:
          :type: string
      :required:
      - author
      - body
    issue:
      :type: object
      :properties:
        code:
          :type: string
        detail:
          :type: string
        field:
          :type: string
        path:
          :type: array
          :items:
            :type: string
      :required:
      - code
      - detail
      - field
      - path
    pagePagination:
      :type: object
      :properties:
        current:
          :type: integer
        items:
          :type: integer
        next:
          :type:
          - integer
          - 'null'
        prev:
          :type:
          - integer
          - 'null'
        total:
          :type: integer
      :required:
      - current
      - items
      - total
    post:
      :type: object
      :properties:
        comments:
          :type: array
          :items:
            :$ref: "#/components/schemas/comment"
        id:
          :type: string
        title:
          :type: string
      :required:
      - comments
    postCreatePayload:
      :type: object
      :properties:
        comments:
          :type: array
          :items:
            :$ref: "#/components/schemas/commentNestedPayload"
        title:
          :type: string
      :required:
      - title
    postInclude:
      :type: object
      :properties:
        comments:
          :$ref: "#/components/schemas/commentInclude"
    postNestedCreatePayload:
      :type: object
      :properties:
        _type:
          :type: string
          :const: create
        comments:
          :type: array
          :items:
            :$ref: "#/components/schemas/commentNestedPayload"
        title:
          :type: string
      :required:
      - _type
      - title
    postNestedPayload:
      :oneOf:
      - :$ref: "#/components/schemas/postNestedCreatePayload"
      - :$ref: "#/components/schemas/postNestedUpdatePayload"
      :discriminator:
        :propertyName: _type
        :mapping:
          create: "#/components/schemas/postNestedCreatePayload"
          update: "#/components/schemas/postNestedUpdatePayload"
    postNestedUpdatePayload:
      :type: object
      :properties:
        _type:
          :type: string
          :const: update
        comments:
          :type: array
          :items:
            :$ref: "#/components/schemas/commentNestedPayload"
        title:
          :type: string
      :required:
      - _type
      - title
    postPage:
      :type: object
      :properties:
        number:
          :type: integer
          :minimum: 1
        size:
          :type: integer
          :minimum: 1
          :maximum: 100
    postUpdatePayload:
      :type: object
      :properties:
        comments:
          :type: array
          :items:
            :$ref: "#/components/schemas/commentNestedPayload"
        title:
          :type: string
      :required:
      - title
    stringFilter:
      :type: object
      :properties:
        contains:
          :type: string
        endsWith:
          :type: string
        eq:
          :type: string
        in:
          :type: array
          :items:
            :type: string
        startsWith:
          :type: string
    user:
      :type: object
      :properties:
        createdAt:
          :type: string
        email:
          :type: string
        id:
          :type: string
        posts:
          :type: array
          :items:
            :$ref: "#/components/schemas/post"
        profile:
          :type: object
          :properties: {}
        updatedAt:
          :type: string
        username:
          :type: string
      :required:
      - posts
      - profile
    userCreatePayload:
      :type: object
      :properties:
        email:
          :type: string
        posts:
          :type: array
          :items:
            :$ref: "#/components/schemas/postNestedPayload"
        profile:
          :type: object
          :properties: {}
        username:
          :type: string
      :required:
      - email
      - username
    userFilter:
      :type: object
      :properties:
        _and:
          :type: array
          :items:
            :$ref: "#/components/schemas/userFilter"
        _not:
          :$ref: "#/components/schemas/userFilter"
        _or:
          :type: array
          :items:
            :$ref: "#/components/schemas/userFilter"
        email:
          :oneOf:
          - :type: string
          - :$ref: "#/components/schemas/stringFilter"
        username:
          :oneOf:
          - :type: string
          - :$ref: "#/components/schemas/stringFilter"
    userInclude:
      :type: object
      :properties:
        posts:
          :$ref: "#/components/schemas/postInclude"
        profile:
          :$ref: "#/components/schemas/userProfileInclude"
    userPage:
      :type: object
      :properties:
        number:
          :type: integer
          :minimum: 1
        size:
          :type: integer
          :minimum: 1
          :maximum: 100
    userProfileInclude:
      :type: object
      :properties: {}
    userSort:
      :type: object
      :properties:
        createdAt: {}
        updatedAt: {}
    userUpdatePayload:
      :type: object
      :properties:
        email:
          :type: string
        posts:
          :type: array
          :items:
            :$ref: "#/components/schemas/postNestedPayload"
        profile:
          :type: object
          :properties: {}
        username:
          :type: string
      :required:
      - email
      - username
