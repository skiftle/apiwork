---
order: 1
---

# i18n

Need your API in multiple languages? Apiwork hooks into Rails' I18n. Error messages, action descriptions, and documentation strings can all be translated.

Translations resolve at runtime based on `I18n.locale` — same API, different languages.

## Error Codes

When you call `expose_error :not_found`, Apiwork looks up the message:

1. **API-specific**: `apiwork.apis.<path>.error_codes.<code>.description`
2. **Global**: `apiwork.error_codes.<code>.description`
3. **Fallback**: Code titleized (`not_found` becomes "Not Found")

```yaml
# config/locales/en.yml
en:
  apiwork:
    error_codes:
      not_found:
        description: "The requested resource could not be found"
      forbidden:
        description: "You don't have permission to access this resource"
```

For API-specific messages (API mounted at `/api/v1`):

```yaml
en:
  apiwork:
    apis:
      api/v1:
        error_codes:
          not_found:
            description: "Item not found"
```

### Interpolation

You can insert dynamic values:

```yaml
en:
  apiwork:
    error_codes:
      rate_limited:
        description: "Too many requests. Try again in %{seconds} seconds."
```

```ruby
expose_error :rate_limited, i18n: { seconds: 60 }
```

### Custom Error Codes

```ruby
# config/initializers/error_codes.rb
Apiwork::ErrorCode.register :insufficient_funds, status: 402
```

```yaml
en:
  apiwork:
    error_codes:
      insufficient_funds:
        description: "Insufficient funds for this transaction"
```

## Domain Issues (Standard Adapter)

The built-in adapter maps Rails validation errors to [domain issues](./guide/core/errors/domain-errors.md). The `detail` field in each issue is translatable.

Lookup order:

1. **API-specific**: `apiwork.apis.<path>.adapters.standard.issues.<code>.detail`
2. **Global**: `apiwork.adapters.standard.issues.<code>.detail`
3. **Fallback**: Built-in English messages

```yaml
# config/locales/en.yml
en:
  apiwork:
    adapters:
      standard:
        issues:
          required:
            detail: "Required"
          unique:
            detail: "Already taken"
          min:
            detail: "Too short"
          max:
            detail: "Too long"
          invalid:
            detail: "Invalid"
```

For API-specific messages (API mounted at `/api/v1`):

```yaml
en:
  apiwork:
    apis:
      api/v1:
        adapters:
          standard:
            issues:
              required:
                detail: "This field is required"
              unique:
                detail: "This value is already in use"
```

::: info
Apiwork provides built-in English translations for all 23 domain issue codes. Override them in your locale files when you need different wording or multiple languages.
:::

See [Domain Issues](./guide/core/errors/domain-errors.md) for the complete list of codes.

### Custom Validations

Custom model validations pass through as your own domain vocabulary:

```ruby
class Invoice < ApplicationRecord
  validate :check_total

  private

  def check_total
    errors.add(:total, :negative) if total.negative?
  end
end
```

The code `:negative` passes through unchanged. Translate it like any other domain issue:

```yaml
en:
  apiwork:
    adapters:
      standard:
        issues:
          negative:
            detail: "Cannot be negative"
```

```yaml
sv:
  apiwork:
    adapters:
      standard:
        issues:
          negative:
            detail: "Kan inte vara negativt"
```

If no translation exists, the code is humanized (`negative` becomes "Negative").

## Action Metadata

Summaries and descriptions for actions can come from locale files instead of inline:

**Inline** (wins if present):
```ruby
action :index do
  summary "List all invoices"
end
```

**Locale file** (translatable):
```yaml
en:
  apiwork:
    apis:
      api/v1:
        contracts:
          invoice:
            actions:
              index:
                summary: "List all invoices"
                description: "Returns invoices for the authenticated account"
```

Use inline for single-language APIs. Use locale files when you need multiple languages or localized OpenAPI exports.

## Types, Attributes, and Associations

Descriptions for types, attributes, and associations all follow the same pattern:

### Types

```yaml
en:
  apiwork:
    apis:
      api/v1:
        types:
          invoice_filter:
            description: "Search and filter invoices"
```

### Attributes

```yaml
en:
  apiwork:
    apis:
      api/v1:
        schemas:
          invoice:
            attributes:
              number:
                description: "Unique invoice identifier"
              status:
                description: "Current invoice status"
```

### Associations

```yaml
en:
  apiwork:
    apis:
      api/v1:
        schemas:
          post:
            associations:
              comments:
                description: "Comments on this post"
```

## Lookup Priority

For all translatable fields:

1. **Inline** — `description:` option in Ruby wins
2. **Locale file** — I18n lookup
3. **nil** — No description

Inline values are constants. Locale values change with `I18n.locale`.

## Multiple Languages

Just create separate locale files for each language:

```yaml
# config/locales/apiwork.en.yml
en:
  apiwork:
    error_codes:
      not_found:
        description: "Not found"
```

```yaml
# config/locales/apiwork.sv.yml
sv:
  apiwork:
    error_codes:
      not_found:
        description: "Hittades inte"
```

## Built-in Defaults

Apiwork provides English translations for all built-in error codes. Everything else — types, attributes, associations — needs explicit descriptions via inline options, locale files, or [Declaration Merging](./guide/core/types/declaration-merging.md).

## Examples

- [API Documentation](/examples/api-documentation.md) — Add descriptions, examples, and metadata to your API
- [API Documentation i18n](/examples/api-documentation-i18n.md) — Translate documentation into multiple languages
