title: Model Validation Errors
description: How Apiwork captures ActiveRecord validation errors and presents them in a unified format
order: 7

scenarios:
  create_valid:
    method: POST
    path: /happy-zebra/users
    body:
      user:
        email: john@example.com
        username: johndoe
        profile:
          bio: Software developer
          website: https://example.com

  create_invalid_email:
    method: POST
    path: /happy-zebra/users
    body:
      user:
        email: not-an-email
        username: johndoe

  create_missing_fields:
    method: POST
    path: /happy-zebra/users
    body:
      user:
        email: ""
        username: ""

  create_nested_invalid:
    method: POST
    path: /happy-zebra/users
    body:
      user:
        email: john@example.com
        username: johndoe
        profile:
          bio: This bio is way too long and exceeds the maximum allowed length of 500 characters. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Extra text to exceed limit.
          website: not-a-valid-url

  create_deep_nested_valid:
    method: POST
    path: /happy-zebra/users
    body:
      user:
        email: deep@example.com
        username: deepuser
        posts:
          - title: My First Post
            comments:
              - body: Great post!
                author: Jane
              - body: Thanks for sharing
                author: Bob

  create_deep_nested_invalid:
    method: POST
    path: /happy-zebra/users
    body:
      user:
        email: deep@example.com
        username: deepuser
        posts:
          - title: My Post
            comments:
              - body: ""
                author: ""
